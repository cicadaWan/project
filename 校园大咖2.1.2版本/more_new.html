<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta content="width=device-width, minimum-scale=1,initial-scale=1, maximum-scale=1, user-scalable=1" id="viewport" name="viewport" />
		<meta content="yes" name="apple-mobile-web-app-capable" />
		<meta content="black" name="apple-mobile-web-app-status-bar-style" />
		<meta content="telephone=no" name="format-detection" />
		<link rel="stylesheet" href="iconfont/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<title>最新大咖</title>
	</head>
	<body onload="load()">
		<div id="wrapper">
		  <div id="scroller">
		  	<ul id="list" class="new_content">
		  		<li class="ctt_new">
					<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>
					<span class="new_title1">叮咚叮咚</span>
					<span class="new_title2">广州音乐学院</span>
				</li>
				<li class="ctt_new">
					<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>
					<span class="new_title1">叮咚叮咚</span>
					<span class="new_title2">广州音乐学院</span>
				</li>
				<li class="ctt_new">
					<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>
					<span class="new_title1">叮咚叮咚</span>
					<span class="new_title2">广州音乐学院</span>
				</li>
				<li class="ctt_new">
					<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>
					<span class="new_title1">叮咚叮咚</span>
					<span class="new_title2">广州音乐学院</span>
				</li>
				<li class="ctt_new">
					<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>
					<span class="new_title1">叮咚叮咚</span>
					<span class="new_title2">广州音乐学院</span>
				</li>
				<li class="ctt_new">
					<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>
					<span class="new_title1">叮咚叮咚</span>
					<span class="new_title2">广州音乐学院</span>
				</li>
				<li class="ctt_new">
					<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>
					<span class="new_title1">叮咚叮咚</span>
					<span class="new_title2">广州音乐学院</span>
				</li>
				<li class="ctt_new">
					<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>
					<span class="new_title1">叮咚叮咚</span>
					<span class="new_title2">广州音乐学院</span>
				</li>
				<li class="ctt_new">
					<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>
					<span class="new_title1">叮咚叮咚</span>
					<span class="new_title2">广州音乐学院</span>
				</li>
				<li class="ctt_new">
					<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>
					<span class="new_title1">叮咚叮咚</span>
					<span class="new_title2">广州音乐学院</span>
				</li>
		  	</ul>
		  	<div id="pullUp" class="">  
	        <div class="pullUpLabel">加载更多</div>  
	        </div> 
		  </div>
		</div>
	</body>
	<script type="text/javascript" src="js/jquery-2.1.0.js" ></script>
	<script type="text/javascript" src="js/iscroll.probe.min.js" ></script>
	<script>
		
	
	function load () {  
        var myScroll, 
                    pullUp = $("#pullUp"),    
                    pullUpLabel = $(".pullUpLabel"),  
                    container = $('#list'),  
                    loadingStep = 0;//加载状态0默认，1显示加载状态，2执行加载数据，只有当为0时才能再次加载，这是防止过快拉动刷新  
  

            pullUp.hide();  
  
            myScroll = new IScroll("#wrapper", {  
                scrollbars: true,  
                mouseWheel: false,  
                interactiveScrollbars: true,  
                shrinkScrollbars: 'scale',  
                fadeScrollbars: true,  
                scrollY:true,  
                probeType: 2,  
                bindToWrapper:true  
            });  
            myScroll.on("scroll",function(){ 
                    if(loadingStep == 0  && !pullUp.attr("class").match('refresh')){  
                       if(this.y < (this.maxScrollY - 14)){//上拉加载更多
                        pullUp.addClass("refresh").show();  
                        pullUpLabel.text("正在载入");  
                        loadingStep = 1;  
                        pullUpAction();  
                        console.log("1")
                    }  
                }  
            }); 
        function pullUpAction(){  
            setTimeout(function(){  
                var li, i;  
                for (i = 0,li = ""; i < 4; i++) {  
                   li += '<li class="ctt_new">'+
							'<div class="new_pic"><img src="img/banner01.jpg" class="search_pic" /></div>'+
							'<span class="new_title1">叮咚叮咚</span>'+
							'<span class="new_title2">广州音乐学院</span>'+
						'</li>'
                }  
                container.append(li);  
                pullUp.attr('class','').hide();  
                myScroll.refresh();  
                loadingStep = 0;  
            },500);  
        }  
  
        document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);  
        }  
</script>

</html>
